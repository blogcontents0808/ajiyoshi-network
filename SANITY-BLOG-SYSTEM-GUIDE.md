# 📚 Sanity ブログシステム 利用ガイド

**味美ネットワーク ウェブサイト専用**

---

## 🌟 システム概要

### 🎯 Sanity CMS とは
**Sanity**は、現代的なヘッドレスCMS（Content Management System）です。  
従来のWordPressとは異なり、コンテンツ管理とフロントエンド表示を分離した設計により、高速で柔軟なウェブサイトを実現できます。

### 🏗️ 味美ネットワークでの構成
```
Sanity Studio (管理画面) → Sanity Database → 味美ネットワーク ウェブサイト
     ↓                        ↓                    ↓
コンテンツ編集・投稿      クラウドストレージ      ユーザーが閲覧
```

---

## 🚀 Sanity Studio の使い方

### 1. 起動方法
```bash
# ターミナル（コマンドプロンプト）で実行
cd "C:\Users\koichi yagi\OneDrive\Claude\ajiyoshi-network\vibe-blog-by-sanity"
npm run dev

# 成功すると以下が表示されます：
# Local:   http://localhost:3333
```

### 2. アクセス
- **URL**: http://localhost:3333
- **ブラウザ**: Chrome、Safari、Firefox、Edge対応
- **ログイン**: Sanityアカウント（Google連携可）

### 3. 基本画面構成
```
┌─────────────────────────────┐
│ [投稿] [カテゴリー] [設定]    │ ← メニュー
├─────────────────────────────┤
│ 📝 新規投稿                  │
│ 📰 ウェブサイトをリニューアル...│
│ 🌸 2025　さくらまつりのお礼   │
│ 📋 2024味美推しフェス        │ ← 記事一覧
│ 🎪 2024　さくらまつり        │
│ ⚽ ハンドーボール知多中...    │
└─────────────────────────────┘
```

---

## ✏️ 記事作成・編集方法

### 📝 新規記事作成
1. **「+ 新規投稿」**をクリック
2. **必須項目**を入力：
   - **タイトル**: 記事のタイトル
   - **スラッグ**: URL用の英数字識別子（自動生成可）
   - **公開日**: 表示したい日付
   - **カテゴリー**: 「活動報告」など

3. **コンテンツエリア**でリッチな文章作成：
   - **見出し**: H1, H2, H3対応
   - **段落**: 通常の文章
   - **太字・斜体**: テキスト装飾
   - **リスト**: 箇条書き・番号付きリスト

### 🖼️ 画像の追加方法
1. コンテンツ内で**「+」**ボタンをクリック
2. **「Image」**を選択
3. **画像をアップロード**：
   - **ドラッグ&ドロップ**で簡単追加
   - **推奨サイズ**: 幅800px以内
   - **形式**: PNG, JPG, WebP対応

4. **画像設定**：
   - **Alt Text**: 視覚障害者向け説明文
   - **Caption**: 画像説明文（オプション）

### 📄 コンテンツ種類

#### テキスト要素
- **段落**: 通常の文章
- **見出し**: H1（大）→ H2（中）→ H3（小）
- **引用**: 重要な文言を強調

#### メディア要素
- **画像**: JPG, PNG, WebP
- **動画**: YouTube埋め込み対応

#### 構造要素
- **箇条書きリスト**: • 項目1 • 項目2
- **番号付きリスト**: 1. 項目1 2. 項目2

---

## 🔄 ウェブサイトへの反映方法

### 自動同期システム
味美ネットワークでは、**完全自動同期システム**を構築済みです。

#### 1. 通常の更新（推奨）
1. **Sanity Studioで記事編集・保存**
2. **自動同期システム実行**：
   ```bash
   cd "C:\Users\koichi yagi\OneDrive\Claude\ajiyoshi-network"
   node complete-sanity-sync.js
   ```
3. **自動的にウェブサイトに反映**

#### 2. 緊急時の修復
何らかの問題が発生した場合：
```bash
# 完全修復システム実行
node fix-blog-data.js

# または特定記事のデバッグ
node debug-specific-post.js
```

---

## 🎨 PortableText システム

### 💡 PortableTextとは
Sanityが採用する**リッチコンテンツ形式**です。  
従来のHTMLとは異なり、構造化されたデータとして保存されます。

### 📊 変換プロセス
```
Sanity Studio → PortableText → 味美ネットワーク変換システム → HTML → ウェブサイト表示
```

#### 対応要素
| Sanity要素 | 変換後HTML | 表示例 |
|-----------|-----------|--------|
| Normal Text | `<p>` | 通常の段落 |
| Heading 1 | `<h1>` | # 大見出し |
| Heading 2 | `<h2>` | ## 中見出し |
| Heading 3 | `<h3>` | ### 小見出し |
| Strong | `<strong>` | **太字** |
| Emphasis | `<em>` | *斜体* |
| Image | `<figure><img>` | 画像+キャプション |
| List | `<ul><li>` | • リスト項目 |

### 🖼️ 画像処理システム
- **自動最適化**: Sanity CDNが最適サイズに変換
- **高速配信**: 世界中のCDNから高速配信
- **レスポンシブ**: デバイス別サイズ自動調整

---

## 🔧 トラブルシューティング

### ❌ よくある問題と解決方法

#### 1. 記事が表示されない
**症状**: 新しい記事が投稿できない  
**解決方法**:
```bash
# 記事データ確認
node check-all-posts-proper.js

# 同期システム再実行
node complete-sanity-sync.js
```

#### 2. 画像が表示されない
**症状**: アップロードした画像が見えない  
**チェック項目**:
- ファイルサイズ: 5MB以下
- 形式: JPG, PNG, WebP
- ネットワーク接続: Sanity CDNアクセス可能か

#### 3. Sanity Studio が起動しない
**症状**: localhost:3333にアクセスできない  
**解決方法**:
```bash
# 依存関係再インストール
cd vibe-blog-by-sanity
npm install

# 再起動
npm run dev
```

#### 4. レイアウトが崩れる
**症状**: 文字化け・デザイン崩れ  
**解決方法**:
```bash
# ブログデータ完全修復
node fix-blog-data.js
```

---

## 📊 記事管理のベストプラクティス

### ✅ 推奨作業フロー
1. **下書き保存**: まず未公開で保存
2. **プレビュー確認**: 表示を事前確認
3. **公開**: 問題なければ公開設定
4. **同期実行**: ウェブサイトに反映
5. **確認**: 本番サイトで最終確認

### 🎯 SEO最適化
- **タイトル**: 30文字以内、キーワード含む
- **説明文**: 記事の要点を2-3文で
- **画像**: Alt Textを必ず設定
- **見出し**: H1→H2→H3の階層構造

### 📝 コンテンツ作成のコツ
- **読みやすさ**: 段落は3-4行以内
- **視覚的魅力**: 画像を効果的に配置
- **情報構造**: 見出しで内容を整理
- **地域性**: 味美地域の魅力を強調

---

## 🔐 セキュリティ・バックアップ

### 🛡️ セキュリティ対策
- **アクセス制限**: 承認されたユーザーのみ
- **自動バックアップ**: Sanity CloudにAuto保存
- **バージョン履歴**: 変更履歴の完全保持

### 💾 バックアップシステム
```bash
# Gitでの完全バックアップ
git add -A
git commit -m "記事更新: [記事名]"
git push

# 復元方法
git checkout [バックアップ版のタグ]
```

---

## 📈 分析・改善

### 📊 コンテンツ分析
| 項目 | 現在の状況 |
|-----|----------|
| 総記事数 | 8記事 |
| 平均文字数 | 1,220文字 |
| 画像総数 | 18枚 |
| 人気記事 | さくらまつり関連 |

### 🎯 改善提案
1. **記事頻度**: 月1-2記事の定期投稿
2. **画像活用**: イベント写真の積極活用
3. **カテゴリー**: 活動種別でのカテゴリ分け
4. **アーカイブ**: 年別・月別アーカイブ機能

---

## 🆘 サポート・連絡先

### 📞 技術サポート
- **開発者**: Claude Code
- **対応範囲**: システム障害・バグ修正・機能追加
- **対応時間**: 平日・休日問わず迅速対応

### 📚 学習リソース
- **Sanity公式ドキュメント**: https://www.sanity.io/docs
- **PortableText解説**: https://www.portabletext.org/
- **本システム専用ガイド**: 本ドキュメント

---

## 🎉 まとめ

### ✨ Sanityシステムの利点
1. **使いやすさ**: 直感的な編集画面
2. **高性能**: CDN高速配信
3. **安全性**: クラウドバックアップ
4. **柔軟性**: カスタマイズ可能
5. **将来性**: 最新技術対応

### 🚀 味美ネットワークの展望
このSanityブログシステムにより、地域の魅力を効果的に発信し、住民の皆様とのつながりをより深めることができます。

**最後に**: 何かご不明な点がございましたら、遠慮なくお声がけください。一緒に素晴らしい地域情報サイトを作り上げていきましょう！

---

**📅 作成日**: 2025年8月10日  
**✏️ 作成者**: Claude Code  
**🏷️ バージョン**: v2.0.0  
**🔄 最終更新**: 2025年8月10日